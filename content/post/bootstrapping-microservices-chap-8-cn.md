---
title: "<Bootstrapping Microservices> #8：微服务的自动化测试"
date: 2021-05-26T11:58:33+08:00
draft: true
tags: ["<Manning Bootstrapping Microservices>"]
categories: ["Books"]
---
# 第八章 微服务的自动化测试
> **章节内容**
> * 微服务的自动化测试
> * 使用Jest进行单体测试和结合测试
> * 使用Cypress进行端对端测试
> * 在持续交付中添加自动化测试

当在某个时刻，手动测试变得繁琐且耗费时间时，你就会想要转换到自动化测试。当然自动化测试在软件开发领域已经广泛被使用，但是对于微服务，当我们的应用增长时它就会变得很有必要。
  
## 新的工具
Jest是一个用来测试Javascript的工具。
Cypress是一个用来进行端对端测试的工具。

## 微服务的测试
和我们写的所有代码一样，微服务也需要良好的测试，这样我们才可以知道代码是健壮的、难以被破环的、以及可以优雅地处理各种问题。测试让我们可以安心地知道代码可以在正常和意外的环境正常工作。
有效的测试可以尽可能的模拟真实生产环境。拥有稳定的代码环境是可靠测试的重要因素。
当微服务的数量增长时，我们将依赖更多自动化工具来保持应用运行，以及帮助我们维持快节奏的开发。

## 自动化测试
自动化测试，简单地说，就是代码驱动测试(code-driven tesing)。我们使用测试代码来执行我们的代码并检验它们是否运行正常。
一般来说测试代码会直接调用要被测试的代码，但也可能有非直接调用的情况，例如通过HTTP请求或者RabbitMQ消息。测试代码可以通过检查输出或表现来核实测试结果。

微服务的测试可以应用于多个级别，这些级别的测试与以下三种类型的自动化测试有关:
* 单体测试 —— 测试独立代码和单个功能
* 结合测试 —— 测试整个微服务
* 端对端测试 —— 测试一组微服务及整个应用(包括前端程序)

测试金字塔(testing pyramid)：关联各种自动化测试类型，让你知道每种类型有多少测试应该包含在测试套件中。

自动化测试结合持续交付相当于一个提前预警系统。当警报运转时，我们应该感到庆幸，它给予我们一个停止交付的机会以防止问题蔓延到生产环境并潜在影响到我们的客户。

自动化测试无法替代良好的人工探索性测试（例如，手动测试），它是找到开发团队无法预期到的BUG的唯一途径。

自动化测试不仅仅是来用证明代码可以工作，它还可以用来作为宝贵的交流工具，一种可执行文档(executable documentation)用来说明代码应该如何被使用。它还提供了一个安全的框架，用于重构和重组您的应用程序。这使你能够不断地朝着更简单、更优雅的体系结构前进。

<未完待续>
